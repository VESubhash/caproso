{"version":3,"sources":["webpack:///./src/app/layout/user-group/user-group-routing.module.ts","webpack:///./src/app/layout/user-group/user-group.component.html","webpack:///./src/app/layout/user-group/user-group.component.scss","webpack:///./src/app/layout/user-group/user-group.component.ts","webpack:///./src/app/layout/user-group/user-group.module.ts"],"names":[],"mappings":"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","file":"user-group-user-group-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { UserGroupComponent } from './user-group.component';\n\nconst routes: Routes = [\n    {\n        path: '', component: UserGroupComponent\n    }\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class UserGroupRoutingModule {\n}\n","module.exports = \"<h2>Assign User Group</h2>\\n<br/>\\n<hr>\\n\\n<form [formGroup]=\\\"userGroupForm\\\" (ngSubmit)=\\\"onSubmit(userGroupForm.value)\\\">\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n        <div class=\\\"form-group\\\">\\n            <label> User name</label>\\n            <select class=\\\"form-control\\\" formControlName='ContactId' class=\\\"form-control\\\" (change)=\\\"onContactChange($event.target.value)\\\"\\n\\n            [ngClass]=\\\"{ 'is-invalid': submitted && f.ContactId.errors }\\\">\\n            <option value=\\\"\\\">Please select</option>\\n            <option *ngFor=\\\"let user of userModel\\\" [value]=\\\"user.ContactId\\\">{{user.FirstName}} {{user.LastName}}</option>\\n            </select>\\n\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label> Group</label>\\n            <div class=\\\"checkbox-list\\\">\\n                <div *ngFor=\\\"let group of groupsModel\\\">\\n\\n                    <input type=\\\"checkbox\\\"  [ngModelOptions]=\\\"{standalone: true}\\\" (change)=\\\"onChange(group.LTagId, $event.target.checked)\\\" [(ngModel)]=\\\"group.Checked\\\"> {{group.TagDescr}}<br>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n</div>\\n    <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">{{btnName}}</button>\\n        <img *ngIf=\\\"loading\\\"\\n             src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\"/>\\n        <a onclick=\\\"window.history.back();\\\" class=\\\"btn btn-link\\\">Cancel</a>\\n    </div>\\n</form>\\n\"","module.exports = \".checkbox-list {\\n  padding: 5px;\\n  border: 1px solid #b7b7b7;\\n  width: 100%;\\n  background-color: #ffffff; }\\n\"","import {Component, OnInit} from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {FormArray, FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {AlertService} from '../../services/alert.service';\nimport {TagsService} from '../../services/tag.service';\nimport {ClientsService} from '../../services/clients.service';\nimport {ClientsModal} from '../manage-clients/ClientsModal';\nimport {GroupsService} from '../../services/groups.service';\nimport {forEach} from '@angular/router/src/utils/collection';\nimport {GroupModel} from '../../model/GroupModel';\n\n@Component({\n    selector: 'user-group',\n    templateUrl: './user-group.component.html',\n    styleUrls: ['./user-group.component.scss']\n})\nexport class UserGroupComponent implements OnInit {\n\n\n    btnName = 'Submit';\n    userGroupForm: FormGroup;\n    loading = false;\n    submitted = false;\n    organizationId: number;\n    lTagsId: number;\n    groupsModel : GroupModel[] = [];\n    userGroupsModel : any;\n    userModel:ClientsModal[]=[];\n    constructor(\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private alertService: AlertService,\n        private httpTagsService: TagsService,\n        private httpClientService: ClientsService,\n        private httpGroupService: GroupsService\n\n    ) {\n    }\n\n    ngOnInit() {\n\n        this.buildForm();\n        this.lTagsId = 0;\n        this.organizationId = Number(localStorage.getItem('organizationId'));\n        this.lTagsId = Number(localStorage.getItem('lTagId'));\n        this.getGroupList();\n        this.getUsersByOrganizationId();\n    }\n\n\n    buildForm() {\n\n        this.userGroupForm = this.formBuilder.group({\n                UserGroupIds: this.formBuilder.array([]),\n                ContactId: ['', Validators.required]\n            }\n        );\n    }\n\n\n    // convenience getter for easy access to form fields\n    get f() {\n        return this.userGroupForm.controls;\n    }\n\n    onSubmit(userGroup) {\n        this.submitted = true;\n        // stop here if form is invalid\n        if (this.userGroupForm.invalid) {\n            return;\n        }\n\n        this.loading = true;\n        this.httpGroupService.SaveUserGroup(userGroup)\n            .subscribe(\n                data => {\n\n                    this.router.navigate(['./user-group']);\n                    this.alertService.success( 'Group assign to user successfully', true);\n                    this.loading = false;\n                },\n                error => {\n                    this.alertService.error(error);\n                    this.loading = false;\n                });\n    }\n\n    private getGroupList() {\n        let organizationId =  Number(localStorage.getItem('organizationId'));\n        this.httpTagsService.getTagByTypeAndOrganizationId('Groups',organizationId, true)\n            .subscribe((group: GroupModel[]) => {\n\n                this.groupsModel = group;\n            });\n\n    }\n\n    private getUserGroupbyContactId(contactId) {\n\n        this.httpGroupService.getUserGroupByContactId(contactId, true)\n            .subscribe(userGroup => {\n                this.userGroupsModel = userGroup;\n                for(let group of this.groupsModel)\n                {\n                    let usergroup = this.userGroupsModel.filter(x => x.LGroupId == group.LTagId )[0];\n                    group.Checked = usergroup && usergroup.LGroupId == group.LTagId? true: false;\n                }\n            });\n    }\n\n    private getUsersByOrganizationId() {\n        let organizationId =  Number(localStorage.getItem('organizationId'));\n        this.httpClientService.getUsersByOrganizationId(organizationId)\n            .subscribe((data: ClientsModal[]) => {\n               this.userModel = data;\n            });\n    }\n\n    onContactChange(contactId){\n        this.getUserGroupbyContactId(contactId);\n\n    }\n\n    onChange(groupId:string, isChecked: boolean) {\n        const userGroupIdsArray = <FormArray>this.userGroupForm.controls.UserGroupIds;\n\n        if(isChecked) {\n            userGroupIdsArray.push(new FormControl(groupId));\n        } else {\n            let index = userGroupIdsArray.controls.findIndex(x => x.value == groupId)\n            userGroupIdsArray.removeAt(index);\n        }\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgbCarouselModule, NgbAlertModule } from '@ng-bootstrap/ng-bootstrap';\nimport { DataTablesModule } from 'angular-datatables';\nimport { StatModule } from '../../shared';\nimport { UserGroupRoutingModule} from './user-group-routing.module';\nimport { UserGroupComponent } from './user-group.component';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        NgbCarouselModule.forRoot(),\n        NgbAlertModule.forRoot(),\n        UserGroupRoutingModule,\n        StatModule,\n        DataTablesModule,\n        FormsModule,\n        ReactiveFormsModule,\n    ],\n    declarations: [UserGroupComponent]\n\n})\nexport class UserGroupModule {}\n"],"sourceRoot":""}